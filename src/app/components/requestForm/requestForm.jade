.container-fluid.blue
  .container.text-center
    h1.h1
      i(class="{{form.type.icon_class}}")
      | {{form.type.title}}

form.container(ng-hide="!form.loaded")
  .blocks
    .block(ng-repeat="section in form.type.sections")
      header.bg-primary
        span.num {{section.order}}
        span.header-content {{section.title}}
      .content.clearfix
        p.bg-success {{section.info}}

        div(ng-repeat="base in section.databases" class="col-md-6")
          .block-item(ng-if="base.type == 0")
            .row
              .col-md-4(ng-if="base.image")
                img(ng-src="{{base.image | imageFilter}}", alt="")
              div(ng-class="{'col-md-8':base.image, 'col-md-12': !base.image}" ng-bind-html="base.content | html")
            .row
              .col-md-12(ng-repeat="button in base.buttons")
                .btn.btn-default.pull-left.justify-elements-container(ng-click="form.countToggle(button)" ng-class="{'active':form.counted(button) >= 0}") 
                  span {{button.title}} 
                  span {{button.price}}₽
                tooltip(id="{{base.id}}" content="{time:button.time, example:button.example, help:button.help}")
            

          .block-item.block-item-info(ng-if="base.type == 1")
            .row
              .col-md-3.text-center(ng-if="base.image")
                img(ng-src="{{base.image | imageFilter}}", alt="")
              div(ng-class="{'col-md-9':base.image, 'col-md-12': !base.image}" ng-bind-html="base.content | html")
            .row
              .col-md-12(ng-repeat="button in base.buttons")
                .btn.btn-default.pull-left.justify-elements-container(ng-click="form.countToggle(button)" ng-class="{'active':form.counted(button) >= 0}") 
                  span {{button.title}} 
                  span {{button.price}}₽
                tooltip(id="{{base.id}}" content="{time:button.time, example:button.example, help:button.help}")

    .block.personal-data#fields
      header.bg-primary
        span.header-content Поля, необходимые для проверки
      .content.clearfix
        .col-md-12
          div.form.order-fields(ng-if="form.fieldsMerged.length")
            .col-md-6(ng-repeat="field in form.itemsSorted = (form.fieldsMerged)" ng-switch on="field.type" ng-init="field.required = form.requiredFields[field.id]")
              .error 
              label.blocked(for="") 
                |{{field.title}}
                span.red(ng-if="field.required != '0'") *
              input.form-control(type="text", name="", input-mask="'date'" ng-switch-when="1" ng-model="form.subfields[field.id]" ng-required="field.required != '0'")
              .row(ng-switch-when="3")
                .col-md-6
                  label От
                  input(type="text", name="" ng-model="form.subfields[field.id][0]" ng-required="field.required" rmask="99.99.9999").form-control
                .col-md-6
                  label До
                  input(type="text", name="" ng-model="form.subfields[field.id][1]" ng-required="field.required" rmask="99.99.9999").form-control
              
              .form-group(ng-switch-when="2")
                |{{field.title}}
                span.red(ng-if="field.required != '0'") *
                select.form-control(ng-model="form.subfields[field.id]" ng-required="field.required")
                  option(ng-repeat="sub in field.subfields.split(',')") {{sub}}

              .form-group(ng-switch-when="4")
                |{{field.title}}
                span.red(ng-if="field.required != '0'") *
                input(nv-file-select="", uploader="field.uploader", type="file" ng-required="field.required")
                .img-wrp(ng-repeat="item in field.uploader.queue")
                  i.fa.fa-times-circle(ng-click="item.remove()")
                  div(ng-thumb="{ file: item._file, height: 30 }" class="img-thumbnail")
              input.form-control(type="text", name="", ng-switch-default ng-model="form.subfields[field.id]" ng-required="field.required")

              .form-group(ng-switch-when="5")
                select.form-control(ng-model="form.subfields[field.id]")
                  option(ng-repeat="sub in form.regions") {{sub}}
            
  .row.submit-row
    .col-md-9.text-right.left
      .sum-wrp
        span Сумма заказа:
        span.sum {{form.orderCost}}₽
    .col-md-3.right
      button.btn.btn-success.btn-lg(ng-click="form.submitForm()") Заказать